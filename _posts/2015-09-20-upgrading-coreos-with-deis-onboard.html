---
layout: post
title: Upgrading CoreOS With Deis Onboard
categories:
- devop
tags:
- devop
- coreos
- deis
- container
- cluster
- cloud
- server provisioning
status: publish
type: post
published: true
meta: {}
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>Deis have disable the auto update facility in CoreOS by default due to specific technical reason.</p>

<p>To update to the latest release of CoreOS we must trigger the update manually using following command.</p>

<pre><code>sudo systemctl unmask update-engine.service
sudo systemctl start update-engine.service
sudo update_engine_client -update</code></pre>

<p>For those who is not familiar with CoreOS, you will notice the argument <code>unmask</code> of <code>systemctl</code> first command line. This service have been marked as <code>masked</code> to make it impossible to start nor enabled by the system itself. It is part of CoreOS <code>systemd</code> feature where it introduce granular level of service management.</p>

<p>A completed CoreOS update required a reboot as it will change the passive update partition to become active upon boot process. The <code>update-engine</code> service need to be stop and mask back to prevent the automatic update process in the future.</p>

<pre><code>sudo systemctl stop update-engine.service
sudo systemctl mask update-engine.service</code></pre>

<p>We can verify successful update with following command.</p>

<pre><code>cat /etc/lsb-release</code></pre>
</body></html>
